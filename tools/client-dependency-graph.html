<!doctype html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8" />
    <title>dependency graph</title>
    <style>
      .node:active path,
.node:hover path,
.node.current path,
.node:active polygon,
.node:hover polygon,
.node.current polygon {
  stroke: fuchsia;
  stroke-width: 2;
}

.edge:active path,
.edge:hover path,
.edge.current path,
.edge:active ellipse,
.edge:hover ellipse,
.edge.current ellipse {
  stroke: url(#edgeGradient);
  stroke-width: 3;
  stroke-opacity: 1;
}

.edge:active polygon,
.edge:hover polygon,
.edge.current polygon {
  stroke: fuchsia;
  stroke-width: 3;
  fill: fuchsia;
  stroke-opacity: 1;
  fill-opacity: 1;
}

.edge:active text,
.edge:hover text {
  fill: fuchsia;
}

.cluster path {
  stroke-width: 3;
}

.cluster:active path,
.cluster:hover path {
  fill: #ffff0011;
}

div.hint {
  background-color: #000000aa;
  color: white;
  font-family: Arial, Helvetica, sans-serif;
  border-radius: 1rem;
  position: fixed;
  top: calc(50% - 4em);
  right: calc(50% - 10em);
  border: none;
  padding: 1em 3em 1em 1em;
}

.hint button {
  position: absolute;
  font-weight: bolder;
  right: 0.6em;
  top: 0.6em;
  color: inherit;
  background-color: inherit;
  border: 1px solid currentColor;
  border-radius: 1em;
  margin-left: 0.6em;
}

.hint a {
  color: inherit;
}

#button_help {
  color: white;
  background-color: #00000011;
  border-radius: 1em;
  position: fixed;
  top: 1em;
  right: 1em;
  font-size: 24pt;
  font-weight: bolder;
  width: 2em;
  height: 2em;
  border: none;
}

#button_help:hover {
  cursor: pointer;
  background-color: #00000077;
}

@media print {
  #button_help {
    display: none;
  }

  div.hint {
    display: none;
  }
}

    </style>
  </head>
  <body>
    <button id="button_help">?</button>
    <div id="hints" class="hint" style="display: none">
      <button id="close-hints">x</button>
      <span id="hint-text"></span>
      <ul>
        <li><b>Hover</b> - highlight</li>
        <li><b>Right-click</b> - pin highlight</li>
        <li><b>ESC</b> - clear</li>
      </ul>
    </div>
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 12.2.0 (20241103.1931)
 -->
<!-- Title: dependency&#45;cruiser output Pages: 1 -->
<svg width="757pt" height="759pt"
 viewBox="0.00 0.00 757.12 759.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 755)">
<title>dependency&#45;cruiser output</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-755 753.12,-755 753.12,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_src</title>
<path fill="#ffffff" stroke="black" stroke-width="2" d="M20,-8C20,-8 729.12,-8 729.12,-8 735.12,-8 741.12,-14 741.12,-20 741.12,-20 741.12,-731 741.12,-731 741.12,-737 735.12,-743 729.12,-743 729.12,-743 20,-743 20,-743 14,-743 8,-737 8,-731 8,-731 8,-20 8,-20 8,-14 14,-8 20,-8"/>
<text text-anchor="middle" x="374.56" y="-730.45" font-family="Helvetica,sans-Serif" font-weight="bold" font-size="9.00">src</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_src/client</title>
<path fill="#ffffff" stroke="black" stroke-width="2" d="M28,-16C28,-16 721.12,-16 721.12,-16 727.12,-16 733.12,-22 733.12,-28 733.12,-28 733.12,-704 733.12,-704 733.12,-710 727.12,-716 721.12,-716 721.12,-716 28,-716 28,-716 22,-716 16,-710 16,-704 16,-704 16,-28 16,-28 16,-22 22,-16 28,-16"/>
<text text-anchor="middle" x="374.56" y="-703.45" font-family="Helvetica,sans-Serif" font-weight="bold" font-size="9.00">client</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_src/client/application</title>
<path fill="#ffffff" stroke="black" stroke-width="2" d="M207.75,-91C207.75,-91 713.12,-91 713.12,-91 719.12,-91 725.12,-97 725.12,-103 725.12,-103 725.12,-388 725.12,-388 725.12,-394 719.12,-400 713.12,-400 713.12,-400 207.75,-400 207.75,-400 201.75,-400 195.75,-394 195.75,-388 195.75,-388 195.75,-103 195.75,-103 195.75,-97 201.75,-91 207.75,-91"/>
<text text-anchor="middle" x="460.44" y="-387.45" font-family="Helvetica,sans-Serif" font-weight="bold" font-size="9.00">application</text>
</g>
<g id="clust4" class="cluster">
<title>cluster_src/client/application/ports</title>
<path fill="#ffffff" stroke="black" stroke-width="2" d="M413.75,-258C413.75,-258 705.12,-258 705.12,-258 711.12,-258 717.12,-264 717.12,-270 717.12,-270 717.12,-361 717.12,-361 717.12,-367 711.12,-373 705.12,-373 705.12,-373 413.75,-373 413.75,-373 407.75,-373 401.75,-367 401.75,-361 401.75,-361 401.75,-270 401.75,-270 401.75,-264 407.75,-258 413.75,-258"/>
<text text-anchor="middle" x="559.44" y="-360.45" font-family="Helvetica,sans-Serif" font-weight="bold" font-size="9.00">ports</text>
</g>
<g id="clust5" class="cluster">
<title>cluster_src/client/application/usecases</title>
<path fill="#ffffff" stroke="black" stroke-width="2" d="M215.75,-101C215.75,-101 563.62,-101 563.62,-101 569.62,-101 575.62,-107 575.62,-113 575.62,-113 575.62,-238 575.62,-238 575.62,-244 569.62,-250 563.62,-250 563.62,-250 215.75,-250 215.75,-250 209.75,-250 203.75,-244 203.75,-238 203.75,-238 203.75,-113 203.75,-113 203.75,-107 209.75,-101 215.75,-101"/>
<text text-anchor="middle" x="389.69" y="-237.45" font-family="Helvetica,sans-Serif" font-weight="bold" font-size="9.00">usecases</text>
</g>
<g id="clust6" class="cluster">
<title>cluster_src/client/application/usecases/CreateCharacter</title>
<path fill="#ffffff" stroke="black" stroke-width="2" d="M223.75,-109C223.75,-109 555.62,-109 555.62,-109 561.62,-109 567.62,-115 567.62,-121 567.62,-121 567.62,-150 567.62,-150 567.62,-156 561.62,-162 555.62,-162 555.62,-162 223.75,-162 223.75,-162 217.75,-162 211.75,-156 211.75,-150 211.75,-150 211.75,-121 211.75,-121 211.75,-115 217.75,-109 223.75,-109"/>
<text text-anchor="middle" x="389.69" y="-149.45" font-family="Helvetica,sans-Serif" font-weight="bold" font-size="9.00">CreateCharacter</text>
</g>
<g id="clust7" class="cluster">
<title>cluster_src/client/application/usecases/GetCharacters</title>
<path fill="#ffffff" stroke="black" stroke-width="2" d="M228.25,-170C228.25,-170 554.88,-170 554.88,-170 560.88,-170 566.88,-176 566.88,-182 566.88,-182 566.88,-211 566.88,-211 566.88,-217 560.88,-223 554.88,-223 554.88,-223 228.25,-223 228.25,-223 222.25,-223 216.25,-217 216.25,-211 216.25,-211 216.25,-182 216.25,-182 216.25,-176 222.25,-170 228.25,-170"/>
<text text-anchor="middle" x="391.56" y="-210.45" font-family="Helvetica,sans-Serif" font-weight="bold" font-size="9.00">GetCharacters</text>
</g>
<g id="clust8" class="cluster">
<title>cluster_src/client/domain</title>
<path fill="#ffffff" stroke="black" stroke-width="2" d="M618,-27C618,-27 674.75,-27 674.75,-27 680.75,-27 686.75,-33 686.75,-39 686.75,-39 686.75,-68 686.75,-68 686.75,-74 680.75,-80 674.75,-80 674.75,-80 618,-80 618,-80 612,-80 606,-74 606,-68 606,-68 606,-39 606,-39 606,-33 612,-27 618,-27"/>
<text text-anchor="middle" x="646.38" y="-67.45" font-family="Helvetica,sans-Serif" font-weight="bold" font-size="9.00">domain</text>
</g>
<g id="clust9" class="cluster">
<title>cluster_src/client/infrastructure</title>
<path fill="#ffffff" stroke="black" stroke-width="2" d="M45.25,-30C45.25,-30 524.12,-30 524.12,-30 530.12,-30 536.12,-36 536.12,-42 536.12,-42 536.12,-71 536.12,-71 536.12,-77 530.12,-83 524.12,-83 524.12,-83 45.25,-83 45.25,-83 39.25,-83 33.25,-77 33.25,-71 33.25,-71 33.25,-42 33.25,-42 33.25,-36 39.25,-30 45.25,-30"/>
<text text-anchor="middle" x="284.69" y="-70.45" font-family="Helvetica,sans-Serif" font-weight="bold" font-size="9.00">infrastructure</text>
</g>
<g id="clust10" class="cluster">
<title>cluster_src/client/presentation</title>
<path fill="#ffffff" stroke="black" stroke-width="2" d="M36,-408C36,-408 545.62,-408 545.62,-408 551.62,-408 557.62,-414 557.62,-420 557.62,-420 557.62,-651 557.62,-651 557.62,-657 551.62,-663 545.62,-663 545.62,-663 36,-663 36,-663 30,-663 24,-657 24,-651 24,-651 24,-420 24,-420 24,-414 30,-408 36,-408"/>
<text text-anchor="middle" x="290.81" y="-650.45" font-family="Helvetica,sans-Serif" font-weight="bold" font-size="9.00">presentation</text>
</g>
<g id="clust11" class="cluster">
<title>cluster_src/client/presentation/controllers</title>
<path fill="#ffffff" stroke="black" stroke-width="2" d="M44,-416C44,-416 373.62,-416 373.62,-416 379.62,-416 385.62,-422 385.62,-428 385.62,-428 385.62,-553 385.62,-553 385.62,-559 379.62,-565 373.62,-565 373.62,-565 44,-565 44,-565 38,-565 32,-559 32,-553 32,-553 32,-428 32,-428 32,-422 38,-416 44,-416"/>
<text text-anchor="middle" x="208.81" y="-552.45" font-family="Helvetica,sans-Serif" font-weight="bold" font-size="9.00">controllers</text>
</g>
<g id="clust12" class="cluster">
<title>cluster_src/client/presentation/controllers/CreateCharacter</title>
<path fill="#ffffff" stroke="black" stroke-width="2" d="M52,-424C52,-424 365.62,-424 365.62,-424 371.62,-424 377.62,-430 377.62,-436 377.62,-436 377.62,-465 377.62,-465 377.62,-471 371.62,-477 365.62,-477 365.62,-477 52,-477 52,-477 46,-477 40,-471 40,-465 40,-465 40,-436 40,-436 40,-430 46,-424 52,-424"/>
<text text-anchor="middle" x="208.81" y="-464.45" font-family="Helvetica,sans-Serif" font-weight="bold" font-size="9.00">CreateCharacter</text>
</g>
<g id="clust13" class="cluster">
<title>cluster_src/client/presentation/controllers/GetCharacters</title>
<path fill="#ffffff" stroke="black" stroke-width="2" d="M56.5,-485C56.5,-485 172.5,-485 172.5,-485 178.5,-485 184.5,-491 184.5,-497 184.5,-497 184.5,-526 184.5,-526 184.5,-532 178.5,-538 172.5,-538 172.5,-538 56.5,-538 56.5,-538 50.5,-538 44.5,-532 44.5,-526 44.5,-526 44.5,-497 44.5,-497 44.5,-491 50.5,-485 56.5,-485"/>
<text text-anchor="middle" x="114.5" y="-525.45" font-family="Helvetica,sans-Serif" font-weight="bold" font-size="9.00">GetCharacters</text>
</g>
<g id="clust14" class="cluster">
<title>cluster_src/client/presentation/presenters</title>
<path fill="#ffffff" stroke="black" stroke-width="2" d="M227.88,-573C227.88,-573 343.12,-573 343.12,-573 349.12,-573 355.12,-579 355.12,-585 355.12,-585 355.12,-614 355.12,-614 355.12,-620 349.12,-626 343.12,-626 343.12,-626 227.88,-626 227.88,-626 221.88,-626 215.88,-620 215.88,-614 215.88,-614 215.88,-585 215.88,-585 215.88,-579 221.88,-573 227.88,-573"/>
<text text-anchor="middle" x="285.5" y="-613.45" font-family="Helvetica,sans-Serif" font-weight="bold" font-size="9.00">presenters</text>
</g>
<g id="clust15" class="cluster">
<title>cluster_src/client/presentation/viewModels</title>
<path fill="#ffffff" stroke="black" stroke-width="2" d="M415.62,-578C415.62,-578 537.62,-578 537.62,-578 543.62,-578 549.62,-584 549.62,-590 549.62,-590 549.62,-619 549.62,-619 549.62,-625 543.62,-631 537.62,-631 537.62,-631 415.62,-631 415.62,-631 409.62,-631 403.62,-625 403.62,-619 403.62,-619 403.62,-590 403.62,-590 403.62,-584 409.62,-578 415.62,-578"/>
<text text-anchor="middle" x="476.62" y="-618.45" font-family="Helvetica,sans-Serif" font-weight="bold" font-size="9.00">viewModels</text>
</g>
<!-- src/client/DependencyInjection.ts -->
<g id="node1" class="node">
<title>src/client/DependencyInjection.ts</title>
<g id="a_node1"><a xlink:href="src/client/DependencyInjection.ts" xlink:title="DependencyInjection.ts">
<path fill="#ccffcc" stroke="black" d="M164.33,-689.25C164.33,-689.25 64.67,-689.25 64.67,-689.25 61.58,-689.25 58.5,-686.17 58.5,-683.08 58.5,-683.08 58.5,-676.92 58.5,-676.92 58.5,-673.83 61.58,-670.75 64.67,-670.75 64.67,-670.75 164.33,-670.75 164.33,-670.75 167.42,-670.75 170.5,-673.83 170.5,-676.92 170.5,-676.92 170.5,-683.08 170.5,-683.08 170.5,-686.17 167.42,-689.25 164.33,-689.25"/>
<text text-anchor="start" x="66.5" y="-676.7" font-family="Helvetica,sans-Serif" font-size="9.00">DependencyInjection.ts</text>
</a>
</g>
</g>
<!-- src/client/application/ports/ICharacterRepository.ts -->
<g id="node2" class="node">
<title>src/client/application/ports/ICharacterRepository.ts</title>
<g id="a_node2"><a xlink:href="src/client/application/ports/ICharacterRepository.ts" xlink:title="ICharacterRepository.ts">
<polygon fill="#fb6969" stroke="black" points="532.25,-284.25 421,-284.25 421,-265.75 532.25,-265.75 532.25,-284.25"/>
<text text-anchor="start" x="429" y="-271.7" font-family="Helvetica,sans-Serif" font-size="9.00">ICharacterRepository.ts</text>
</a>
</g>
</g>
<!-- src/client/domain/Character.ts -->
<g id="node3" class="node">
<title>src/client/domain/Character.ts</title>
<g id="a_node3"><a xlink:href="src/client/domain/Character.ts" xlink:title="Character.ts">
<polygon fill="#fa9f36" stroke="black" points="678.75,-53.25 614,-53.25 614,-34.75 678.75,-34.75 678.75,-53.25"/>
<text text-anchor="start" x="622" y="-40.7" font-family="Helvetica,sans-Serif" font-size="9.00">Character.ts</text>
</a>
</g>
</g>
<!-- src/client/application/ports/ICharacterRepository.ts&#45;&gt;src/client/domain/Character.ts -->
<g id="edge1" class="edge">
<title>src/client/application/ports/ICharacterRepository.ts&#45;&gt;src/client/domain/Character.ts</title>
<path fill="none" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" d="M532.68,-275C582.12,-275 646.38,-275 646.38,-275 646.38,-275 646.38,-62.66 646.38,-62.66"/>
<polygon fill="#000000" fill-opacity="0.200000" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" points="648.48,-62.66 646.38,-56.66 644.28,-62.66 648.48,-62.66"/>
</g>
<!-- src/client/application/ports/ICreateCharacterUseCase.ts -->
<g id="node4" class="node">
<title>src/client/application/ports/ICreateCharacterUseCase.ts</title>
<g id="a_node4"><a xlink:href="src/client/application/ports/ICreateCharacterUseCase.ts" xlink:title="ICreateCharacterUseCase.ts">
<polygon fill="#fb6969" stroke="black" points="543.5,-315.25 409.75,-315.25 409.75,-296.75 543.5,-296.75 543.5,-315.25"/>
<text text-anchor="start" x="417.75" y="-302.7" font-family="Helvetica,sans-Serif" font-size="9.00">ICreateCharacterUseCase.ts</text>
</a>
</g>
</g>
<!-- src/client/application/usecases/CreateCharacter/CreateCharacterUseCaseRequest.ts -->
<g id="node5" class="node">
<title>src/client/application/usecases/CreateCharacter/CreateCharacterUseCaseRequest.ts</title>
<g id="a_node5"><a xlink:href="src/client/application/usecases/CreateCharacter/CreateCharacterUseCaseRequest.ts" xlink:title="CreateCharacterUseCaseRequest.ts">
<polygon fill="#fb6969" stroke="black" points="559.62,-135.25 393.62,-135.25 393.62,-116.75 559.62,-116.75 559.62,-135.25"/>
<text text-anchor="start" x="401.62" y="-122.7" font-family="Helvetica,sans-Serif" font-size="9.00">CreateCharacterUseCaseRequest.ts</text>
</a>
</g>
</g>
<!-- src/client/application/ports/ICreateCharacterUseCase.ts&#45;&gt;src/client/application/usecases/CreateCharacter/CreateCharacterUseCaseRequest.ts -->
<g id="edge2" class="edge">
<title>src/client/application/ports/ICreateCharacterUseCase.ts&#45;&gt;src/client/application/usecases/CreateCharacter/CreateCharacterUseCaseRequest.ts</title>
<path fill="none" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" d="M543.89,-309.08C559.49,-309.08 571.62,-309.08 571.62,-309.08 571.62,-309.08 571.62,-126 571.62,-126 571.62,-126 569,-126 569,-126"/>
<polygon fill="#000000" fill-opacity="0.200000" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" points="569,-123.9 563,-126 569,-128.1 569,-123.9"/>
</g>
<!-- src/client/application/ports/IGetCharactersPresenter.ts -->
<g id="node6" class="node">
<title>src/client/application/ports/IGetCharactersPresenter.ts</title>
<g id="a_node6"><a xlink:href="src/client/application/ports/IGetCharactersPresenter.ts" xlink:title="IGetCharactersPresenter.ts">
<polygon fill="#fb6969" stroke="black" points="709.12,-315.25 583.62,-315.25 583.62,-296.75 709.12,-296.75 709.12,-315.25"/>
<text text-anchor="start" x="591.62" y="-302.7" font-family="Helvetica,sans-Serif" font-size="9.00">IGetCharactersPresenter.ts</text>
</a>
</g>
</g>
<!-- src/client/application/usecases/GetCharacters/GetCharactersUseCaseResponse.ts -->
<g id="node7" class="node">
<title>src/client/application/usecases/GetCharacters/GetCharactersUseCaseResponse.ts</title>
<g id="a_node7"><a xlink:href="src/client/application/usecases/GetCharacters/GetCharactersUseCaseResponse.ts" xlink:title="GetCharactersUseCaseResponse.ts">
<polygon fill="#fb6969" stroke="black" points="558.88,-196.25 394.38,-196.25 394.38,-177.75 558.88,-177.75 558.88,-196.25"/>
<text text-anchor="start" x="402.38" y="-183.7" font-family="Helvetica,sans-Serif" font-size="9.00">GetCharactersUseCaseResponse.ts</text>
</a>
</g>
</g>
<!-- src/client/application/ports/IGetCharactersPresenter.ts&#45;&gt;src/client/application/usecases/GetCharacters/GetCharactersUseCaseResponse.ts -->
<g id="edge3" class="edge">
<title>src/client/application/ports/IGetCharactersPresenter.ts&#45;&gt;src/client/application/usecases/GetCharacters/GetCharactersUseCaseResponse.ts</title>
<path fill="none" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" d="M583.15,-302.92C565.57,-302.92 551.19,-302.92 551.19,-302.92 551.19,-302.92 551.19,-205.51 551.19,-205.51"/>
<polygon fill="#000000" fill-opacity="0.200000" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" points="553.29,-205.51 551.19,-199.51 549.09,-205.51 553.29,-205.51"/>
</g>
<!-- src/client/application/ports/IGetCharactersUseCase.ts -->
<g id="node8" class="node">
<title>src/client/application/ports/IGetCharactersUseCase.ts</title>
<g id="a_node8"><a xlink:href="src/client/application/ports/IGetCharactersUseCase.ts" xlink:title="IGetCharactersUseCase.ts">
<polygon fill="#fb6969" stroke="black" points="539,-346.25 414.25,-346.25 414.25,-327.75 539,-327.75 539,-346.25"/>
<text text-anchor="start" x="422.25" y="-333.7" font-family="Helvetica,sans-Serif" font-size="9.00">IGetCharactersUseCase.ts</text>
</a>
</g>
</g>
<!-- src/client/application/ports/IGetCharactersUseCase.ts&#45;&gt;src/client/application/ports/IGetCharactersPresenter.ts -->
<g id="edge4" class="edge">
<title>src/client/application/ports/IGetCharactersUseCase.ts&#45;&gt;src/client/application/ports/IGetCharactersPresenter.ts</title>
<path fill="none" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" d="M539.31,-337C579.99,-337 625.46,-337 625.46,-337 625.46,-337 616.43,-337 616.43,-337"/>
<polygon fill="#000000" fill-opacity="0.200000" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" points="623.9,-324.61 624.29,-318.26 620.03,-322.98 623.9,-324.61"/>
</g>
<!-- src/client/application/usecases/CreateCharacter/CreateCharacterUseCase.ts -->
<g id="node9" class="node">
<title>src/client/application/usecases/CreateCharacter/CreateCharacterUseCase.ts</title>
<g id="a_node9"><a xlink:href="src/client/application/usecases/CreateCharacter/CreateCharacterUseCase.ts" xlink:title="CreateCharacterUseCase.ts">
<polygon fill="#fb6969" stroke="black" points="351.25,-135.25 219.75,-135.25 219.75,-116.75 351.25,-116.75 351.25,-135.25"/>
<text text-anchor="start" x="227.75" y="-122.7" font-family="Helvetica,sans-Serif" font-size="9.00">CreateCharacterUseCase.ts</text>
</a>
</g>
</g>
<!-- src/client/application/usecases/CreateCharacter/CreateCharacterUseCase.ts&#45;&gt;src/client/application/ports/ICharacterRepository.ts -->
<g id="edge5" class="edge">
<title>src/client/application/usecases/CreateCharacter/CreateCharacterUseCase.ts&#45;&gt;src/client/application/ports/ICharacterRepository.ts</title>
<path fill="none" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" d="M351.74,-122.92C355.25,-122.92 357.38,-122.92 357.38,-122.92 357.38,-122.92 357.38,-273.15 357.38,-273.15 357.38,-273.15 411.81,-273.15 411.81,-273.15"/>
<polygon fill="#000000" fill-opacity="0.200000" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" points="411.81,-275.25 417.81,-273.15 411.81,-271.05 411.81,-275.25"/>
</g>
<!-- src/client/application/usecases/CreateCharacter/CreateCharacterUseCase.ts&#45;&gt;src/client/application/usecases/CreateCharacter/CreateCharacterUseCaseRequest.ts -->
<g id="edge6" class="edge">
<title>src/client/application/usecases/CreateCharacter/CreateCharacterUseCase.ts&#45;&gt;src/client/application/usecases/CreateCharacter/CreateCharacterUseCaseRequest.ts</title>
<path fill="none" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" d="M351.54,-129.08C351.54,-129.08 384.36,-129.08 384.36,-129.08"/>
<polygon fill="#000000" fill-opacity="0.200000" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" points="384.36,-131.18 390.36,-129.08 384.36,-126.98 384.36,-131.18"/>
</g>
<!-- src/client/application/usecases/GetCharacters/GetCharactersUseCase.ts -->
<g id="node10" class="node">
<title>src/client/application/usecases/GetCharacters/GetCharactersUseCase.ts</title>
<g id="a_node10"><a xlink:href="src/client/application/usecases/GetCharacters/GetCharactersUseCase.ts" xlink:title="GetCharactersUseCase.ts">
<polygon fill="#fb6969" stroke="black" points="346.75,-196.25 224.25,-196.25 224.25,-177.75 346.75,-177.75 346.75,-196.25"/>
<text text-anchor="start" x="232.25" y="-183.7" font-family="Helvetica,sans-Serif" font-size="9.00">GetCharactersUseCase.ts</text>
</a>
</g>
</g>
<!-- src/client/application/usecases/GetCharacters/GetCharactersUseCase.ts&#45;&gt;src/client/application/ports/ICharacterRepository.ts -->
<g id="edge7" class="edge">
<title>src/client/application/usecases/GetCharacters/GetCharactersUseCase.ts&#45;&gt;src/client/application/ports/ICharacterRepository.ts</title>
<path fill="none" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" d="M316.12,-196.62C316.12,-219.79 316.12,-276.85 316.12,-276.85 316.12,-276.85 411.91,-276.85 411.91,-276.85"/>
<polygon fill="#000000" fill-opacity="0.200000" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" points="411.91,-278.95 417.91,-276.85 411.91,-274.75 411.91,-278.95"/>
</g>
<!-- src/client/application/usecases/GetCharacters/GetCharactersUseCase.ts&#45;&gt;src/client/application/ports/IGetCharactersPresenter.ts -->
<g id="edge8" class="edge">
<title>src/client/application/usecases/GetCharacters/GetCharactersUseCase.ts&#45;&gt;src/client/application/ports/IGetCharactersPresenter.ts</title>
<path fill="none" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" d="M254.88,-196.33C254.88,-209.25 254.88,-231 254.88,-231 254.88,-231 598.81,-231 598.81,-231 598.81,-231 598.81,-287.47 598.81,-287.47"/>
<polygon fill="#000000" fill-opacity="0.200000" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" points="596.71,-287.47 598.81,-293.47 600.91,-287.47 596.71,-287.47"/>
</g>
<!-- src/client/application/usecases/GetCharacters/GetCharactersUseCase.ts&#45;&gt;src/client/application/usecases/GetCharacters/GetCharactersUseCaseResponse.ts -->
<g id="edge10" class="edge">
<title>src/client/application/usecases/GetCharacters/GetCharactersUseCase.ts&#45;&gt;src/client/application/usecases/GetCharacters/GetCharactersUseCaseResponse.ts</title>
<path fill="none" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" d="M347.03,-187C347.03,-187 384.93,-187 384.93,-187"/>
<polygon fill="#000000" fill-opacity="0.200000" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" points="384.93,-189.1 390.93,-187 384.93,-184.9 384.93,-189.1"/>
</g>
<!-- src/client/application/usecases/GetCharacters/GetCharactersUseCase.ts&#45;&gt;src/client/application/ports/IGetCharactersUseCase.ts -->
<g id="edge9" class="edge">
<title>src/client/application/usecases/GetCharacters/GetCharactersUseCase.ts&#45;&gt;src/client/application/ports/IGetCharactersUseCase.ts</title>
<path fill="none" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" d="M285.5,-196.38C285.5,-229.22 285.5,-337 285.5,-337 285.5,-337 404.75,-337 404.75,-337"/>
<polygon fill="#000000" fill-opacity="0.200000" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" points="404.75,-339.1 410.75,-337 404.75,-334.9 404.75,-339.1"/>
</g>
<!-- src/client/infrastructure/GetCharactersDTO.ts -->
<g id="node11" class="node">
<title>src/client/infrastructure/GetCharactersDTO.ts</title>
<g id="a_node11"><a xlink:href="src/client/infrastructure/GetCharactersDTO.ts" xlink:title="GetCharactersDTO.ts">
<polygon fill="#6cbaff" stroke="black" points="528.12,-56.25 425.12,-56.25 425.12,-37.75 528.12,-37.75 528.12,-56.25"/>
<text text-anchor="start" x="433.12" y="-43.7" font-family="Helvetica,sans-Serif" font-size="9.00">GetCharactersDTO.ts</text>
</a>
</g>
</g>
<!-- src/client/infrastructure/GraphQLCharacterRepository.ts -->
<g id="node12" class="node">
<title>src/client/infrastructure/GraphQLCharacterRepository.ts</title>
<g id="a_node12"><a xlink:href="src/client/infrastructure/GraphQLCharacterRepository.ts" xlink:title="GraphQLCharacterRepository.ts">
<polygon fill="#6cbaff" stroke="black" points="187.75,-56.25 41.25,-56.25 41.25,-37.75 187.75,-37.75 187.75,-56.25"/>
<text text-anchor="start" x="49.25" y="-43.7" font-family="Helvetica,sans-Serif" font-size="9.00">GraphQLCharacterRepository.ts</text>
</a>
</g>
</g>
<!-- src/client/infrastructure/GraphQLCharacterRepository.ts&#45;&gt;src/client/application/ports/ICharacterRepository.ts -->
<g id="edge11" class="edge">
<title>src/client/infrastructure/GraphQLCharacterRepository.ts&#45;&gt;src/client/application/ports/ICharacterRepository.ts</title>
<path fill="none" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" d="M114.5,-56.74C114.5,-100.94 114.5,-280.55 114.5,-280.55 114.5,-280.55 411.81,-280.55 411.81,-280.55"/>
<polygon fill="#000000" fill-opacity="0.200000" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" points="411.81,-282.65 417.81,-280.55 411.81,-278.45 411.81,-282.65"/>
</g>
<!-- src/client/infrastructure/GraphQLCharacterRepository.ts&#45;&gt;src/client/domain/Character.ts -->
<g id="edge12" class="edge">
<title>src/client/infrastructure/GraphQLCharacterRepository.ts&#45;&gt;src/client/domain/Character.ts</title>
<path fill="none" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" d="M114.5,-37.43C114.5,-28.57 114.5,-16.75 114.5,-16.75 114.5,-16.75 646.38,-16.75 646.38,-16.75 646.38,-16.75 646.38,-25.44 646.38,-25.44"/>
<polygon fill="#000000" fill-opacity="0.200000" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" points="644.28,-25.44 646.38,-31.44 648.48,-25.44 644.28,-25.44"/>
</g>
<!-- src/client/infrastructure/IGraphQLAdapter.ts -->
<g id="node13" class="node">
<title>src/client/infrastructure/IGraphQLAdapter.ts</title>
<g id="a_node13"><a xlink:href="src/client/infrastructure/IGraphQLAdapter.ts" xlink:title="IGraphQLAdapter.ts">
<polygon fill="#6cbaff" stroke="black" points="333.62,-56.25 237.38,-56.25 237.38,-37.75 333.62,-37.75 333.62,-56.25"/>
<text text-anchor="start" x="245.38" y="-43.7" font-family="Helvetica,sans-Serif" font-size="9.00">IGraphQLAdapter.ts</text>
</a>
</g>
</g>
<!-- src/client/infrastructure/GraphQLCharacterRepository.ts&#45;&gt;src/client/infrastructure/IGraphQLAdapter.ts -->
<g id="edge13" class="edge">
<title>src/client/infrastructure/GraphQLCharacterRepository.ts&#45;&gt;src/client/infrastructure/IGraphQLAdapter.ts</title>
<path fill="none" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" d="M188.01,-47C188.01,-47 227.96,-47 227.96,-47"/>
<polygon fill="#000000" fill-opacity="0.200000" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" points="227.96,-49.1 233.96,-47 227.96,-44.9 227.96,-49.1"/>
</g>
<!-- src/client/infrastructure/IGraphQLAdapter.ts&#45;&gt;src/client/application/ports/ICharacterRepository.ts -->
<g id="edge14" class="edge">
<title>src/client/infrastructure/IGraphQLAdapter.ts&#45;&gt;src/client/application/ports/ICharacterRepository.ts</title>
<path fill="none" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" d="M334.01,-50.08C349.87,-50.08 363.5,-50.08 363.5,-50.08 363.5,-50.08 363.5,-269.45 363.5,-269.45 363.5,-269.45 411.7,-269.45 411.7,-269.45"/>
<polygon fill="#000000" fill-opacity="0.200000" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" points="411.7,-271.55 417.7,-269.45 411.7,-267.35 411.7,-271.55"/>
</g>
<!-- src/client/infrastructure/IGraphQLAdapter.ts&#45;&gt;src/client/infrastructure/GetCharactersDTO.ts -->
<g id="edge15" class="edge">
<title>src/client/infrastructure/IGraphQLAdapter.ts&#45;&gt;src/client/infrastructure/GetCharactersDTO.ts</title>
<path fill="none" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" d="M333.73,-43.92C333.73,-43.92 415.7,-43.92 415.7,-43.92"/>
<polygon fill="#000000" fill-opacity="0.200000" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" points="415.7,-46.02 421.7,-43.92 415.7,-41.82 415.7,-46.02"/>
</g>
<!-- src/client/presentation/controllers/CreateCharacter/CreateCharacterController.ts -->
<g id="node14" class="node">
<title>src/client/presentation/controllers/CreateCharacter/CreateCharacterController.ts</title>
<g id="a_node14"><a xlink:href="src/client/presentation/controllers/CreateCharacter/CreateCharacterController.ts" xlink:title="CreateCharacterController.ts">
<polygon fill="#9fff9f" stroke="black" points="181,-450.25 48,-450.25 48,-431.75 181,-431.75 181,-450.25"/>
<text text-anchor="start" x="56" y="-437.7" font-family="Helvetica,sans-Serif" font-size="9.00">CreateCharacterController.ts</text>
</a>
</g>
</g>
<!-- src/client/presentation/controllers/CreateCharacter/CreateCharacterController.ts&#45;&gt;src/client/application/ports/ICreateCharacterUseCase.ts -->
<g id="edge16" class="edge">
<title>src/client/presentation/controllers/CreateCharacter/CreateCharacterController.ts&#45;&gt;src/client/application/ports/ICreateCharacterUseCase.ts</title>
<path fill="none" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" d="M147.75,-431.29C147.75,-400.34 147.75,-306 147.75,-306 147.75,-306 400.25,-306 400.25,-306"/>
<polygon fill="#000000" fill-opacity="0.200000" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" points="400.25,-308.1 406.25,-306 400.25,-303.9 400.25,-308.1"/>
</g>
<!-- src/client/presentation/controllers/CreateCharacter/CreateCharacterController.ts&#45;&gt;src/client/application/usecases/CreateCharacter/CreateCharacterUseCaseRequest.ts -->
<g id="edge17" class="edge">
<title>src/client/presentation/controllers/CreateCharacter/CreateCharacterController.ts&#45;&gt;src/client/application/usecases/CreateCharacter/CreateCharacterUseCaseRequest.ts</title>
<path fill="none" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" d="M81.25,-431.53C81.25,-382.17 81.25,-156.5 81.25,-156.5 81.25,-156.5 476.62,-156.5 476.62,-156.5 476.62,-156.5 476.62,-144.68 476.62,-144.68"/>
<polygon fill="#000000" fill-opacity="0.200000" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" points="478.73,-144.68 476.63,-138.68 474.53,-144.68 478.73,-144.68"/>
</g>
<!-- src/client/presentation/controllers/CreateCharacter/CreateCharacterControllerRequest.ts -->
<g id="node15" class="node">
<title>src/client/presentation/controllers/CreateCharacter/CreateCharacterControllerRequest.ts</title>
<g id="a_node15"><a xlink:href="src/client/presentation/controllers/CreateCharacter/CreateCharacterControllerRequest.ts" xlink:title="CreateCharacterControllerRequest.ts">
<polygon fill="#9fff9f" stroke="black" points="369.62,-450.25 201.38,-450.25 201.38,-431.75 369.62,-431.75 369.62,-450.25"/>
<text text-anchor="start" x="209.38" y="-437.7" font-family="Helvetica,sans-Serif" font-size="9.00">CreateCharacterControllerRequest.ts</text>
</a>
</g>
</g>
<!-- src/client/presentation/controllers/CreateCharacter/CreateCharacterController.ts&#45;&gt;src/client/presentation/controllers/CreateCharacter/CreateCharacterControllerRequest.ts -->
<g id="edge18" class="edge">
<title>src/client/presentation/controllers/CreateCharacter/CreateCharacterController.ts&#45;&gt;src/client/presentation/controllers/CreateCharacter/CreateCharacterControllerRequest.ts</title>
<path fill="none" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" d="M181.1,-441C181.1,-441 192.07,-441 192.07,-441"/>
<polygon fill="#000000" fill-opacity="0.200000" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" points="192.07,-443.1 198.07,-441 192.07,-438.9 192.07,-443.1"/>
</g>
<!-- src/client/presentation/controllers/GetCharacters/GetCharactersController.ts -->
<g id="node16" class="node">
<title>src/client/presentation/controllers/GetCharacters/GetCharactersController.ts</title>
<g id="a_node16"><a xlink:href="src/client/presentation/controllers/GetCharacters/GetCharactersController.ts" xlink:title="GetCharactersController.ts">
<polygon fill="#9fff9f" stroke="black" points="176.5,-511.25 52.5,-511.25 52.5,-492.75 176.5,-492.75 176.5,-511.25"/>
<text text-anchor="start" x="60.5" y="-498.7" font-family="Helvetica,sans-Serif" font-size="9.00">GetCharactersController.ts</text>
</a>
</g>
</g>
<!-- src/client/presentation/controllers/GetCharacters/GetCharactersController.ts&#45;&gt;src/client/application/ports/IGetCharactersUseCase.ts -->
<g id="edge19" class="edge">
<title>src/client/presentation/controllers/GetCharacters/GetCharactersController.ts&#45;&gt;src/client/application/ports/IGetCharactersUseCase.ts</title>
<path fill="none" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" d="M176.71,-497.38C275.16,-497.38 455.83,-497.38 455.83,-497.38 455.83,-497.38 455.83,-355.58 455.83,-355.58"/>
<polygon fill="#000000" fill-opacity="0.200000" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" points="457.93,-355.58 455.83,-349.58 453.73,-355.58 457.93,-355.58"/>
</g>
<!-- src/client/presentation/presenters/GetCharactersPresenter.ts -->
<g id="node17" class="node">
<title>src/client/presentation/presenters/GetCharactersPresenter.ts</title>
<g id="a_node17"><a xlink:href="src/client/presentation/presenters/GetCharactersPresenter.ts" xlink:title="GetCharactersPresenter.ts">
<polygon fill="#9fff9f" stroke="black" points="347.12,-599.25 223.88,-599.25 223.88,-580.75 347.12,-580.75 347.12,-599.25"/>
<text text-anchor="start" x="231.88" y="-586.7" font-family="Helvetica,sans-Serif" font-size="9.00">GetCharactersPresenter.ts</text>
</a>
</g>
</g>
<!-- src/client/presentation/controllers/GetCharacters/GetCharactersController.ts&#45;&gt;src/client/presentation/presenters/GetCharactersPresenter.ts -->
<g id="edge20" class="edge">
<title>src/client/presentation/controllers/GetCharacters/GetCharactersController.ts&#45;&gt;src/client/presentation/presenters/GetCharactersPresenter.ts</title>
<path fill="none" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" d="M176.95,-506.62C232.85,-506.62 306.04,-506.62 306.04,-506.62 306.04,-506.62 306.04,-571.41 306.04,-571.41"/>
<polygon fill="#000000" fill-opacity="0.200000" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" points="303.94,-571.41 306.04,-577.41 308.14,-571.41 303.94,-571.41"/>
</g>
<!-- src/client/presentation/viewModels/GetCharactersViewModel.ts -->
<g id="node18" class="node">
<title>src/client/presentation/viewModels/GetCharactersViewModel.ts</title>
<g id="a_node18"><a xlink:href="src/client/presentation/viewModels/GetCharactersViewModel.ts" xlink:title="GetCharactersViewModel.ts">
<polygon fill="#9fff9f" stroke="black" points="541.62,-604.25 411.62,-604.25 411.62,-585.75 541.62,-585.75 541.62,-604.25"/>
<text text-anchor="start" x="419.62" y="-591.7" font-family="Helvetica,sans-Serif" font-size="9.00">GetCharactersViewModel.ts</text>
</a>
</g>
</g>
<!-- src/client/presentation/controllers/GetCharacters/GetCharactersController.ts&#45;&gt;src/client/presentation/viewModels/GetCharactersViewModel.ts -->
<g id="edge21" class="edge">
<title>src/client/presentation/controllers/GetCharacters/GetCharactersController.ts&#45;&gt;src/client/presentation/viewModels/GetCharactersViewModel.ts</title>
<path fill="none" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" d="M176.87,-502C285.38,-502 497.42,-502 497.42,-502 497.42,-502 488.39,-502 488.39,-502"/>
<polygon fill="#000000" fill-opacity="0.200000" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" points="494.36,-576.65 497.09,-582.39 498.53,-576.2 494.36,-576.65"/>
</g>
<!-- src/client/presentation/presenters/GetCharactersPresenter.ts&#45;&gt;src/client/application/ports/IGetCharactersPresenter.ts -->
<g id="edge22" class="edge">
<title>src/client/presentation/presenters/GetCharactersPresenter.ts&#45;&gt;src/client/application/ports/IGetCharactersPresenter.ts</title>
<path fill="none" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" d="M264.96,-580.67C264.96,-567.75 264.96,-546 264.96,-546 264.96,-546 667.29,-546 667.29,-546 667.29,-546 667.29,-324.73 667.29,-324.73"/>
<polygon fill="#000000" fill-opacity="0.200000" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" points="669.39,-324.73 667.29,-318.73 665.19,-324.73 669.39,-324.73"/>
</g>
<!-- src/client/presentation/presenters/GetCharactersPresenter.ts&#45;&gt;src/client/application/usecases/GetCharacters/GetCharactersUseCaseResponse.ts -->
<g id="edge23" class="edge">
<title>src/client/presentation/presenters/GetCharactersPresenter.ts&#45;&gt;src/client/application/usecases/GetCharacters/GetCharactersUseCaseResponse.ts</title>
<path fill="none" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" d="M347.54,-590.25C375.37,-590.25 402.06,-590.25 402.06,-590.25 402.06,-590.25 402.06,-205.6 402.06,-205.6"/>
<polygon fill="#000000" fill-opacity="0.200000" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" points="404.16,-205.6 402.06,-199.6 399.96,-205.6 404.16,-205.6"/>
</g>
<!-- src/client/presentation/presenters/GetCharactersPresenter.ts&#45;&gt;src/client/presentation/viewModels/GetCharactersViewModel.ts -->
<g id="edge24" class="edge">
<title>src/client/presentation/presenters/GetCharactersPresenter.ts&#45;&gt;src/client/presentation/viewModels/GetCharactersViewModel.ts</title>
<path fill="none" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" d="M347.55,-594.75C347.55,-594.75 402.24,-594.75 402.24,-594.75"/>
<polygon fill="#000000" fill-opacity="0.200000" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" points="402.24,-596.85 408.24,-594.75 402.24,-592.65 402.24,-596.85"/>
</g>
</g>
</svg>
    <script>
      var gMode = new Mode();

var title2ElementMap = (function makeElementMap() {
  /** @type {NodeListOf<SVGGElement>} */
  var nodes = document.querySelectorAll(".node");
  /** @type {NodeListOf<SVGGElement>} */
  var edges = document.querySelectorAll(".edge");
  return new Title2ElementMap(edges, nodes);
})();

function getHoverHandler(pTitle2ElementMap) {
  /** @type {string} */
  var currentHighlightedTitle = "";

  /** @param {MouseEvent} pMouseEvent */
  return function hoverHighlightHandler(pMouseEvent) {
    var closestNodeOrEdge = pMouseEvent.target.closest(".edge, .node");
    var closestTitleText = getTitleText(closestNodeOrEdge);

    if (
      !(currentHighlightedTitle === closestTitleText) &&
      gMode.get() === gMode.HOVER
    ) {
      resetNodesAndEdges();
      addHighlight(closestNodeOrEdge);
      pTitle2ElementMap.get(closestTitleText).forEach(addHighlight);
      currentHighlightedTitle = closestTitleText;
    }
  };
}

function getSelectHandler(pTitle2ElementMap) {
  /** @type {string} */
  var currentHighlightedTitle = "";

  /** @param {MouseEvent} pMouseEvent */
  return function selectHighlightHandler(pMouseEvent) {
    pMouseEvent.preventDefault();

    var closestNodeOrEdge = pMouseEvent.target.closest(".edge, .node");
    var closestTitleText = getTitleText(closestNodeOrEdge);

    if (!!closestNodeOrEdge) {
      gMode.setToSelect();
    } else {
      gMode.setToHover();
    }
    if (!(currentHighlightedTitle === closestTitleText)) {
      resetNodesAndEdges();
      addHighlight(closestNodeOrEdge);
      pTitle2ElementMap.get(closestTitleText).forEach(addHighlight);
      currentHighlightedTitle = closestTitleText;
    }
  };
}
function Mode() {
  var HOVER = 1;
  var SELECT = 2;

  function setToHover() {
    this._mode = HOVER;
  }
  function setToSelect() {
    this._mode = SELECT;
  }

  /**
   * @returns {number}
   */
  function get() {
    return this._mode || HOVER;
  }

  return {
    HOVER: HOVER,
    SELECT: SELECT,
    setToHover: setToHover,
    setToSelect: setToSelect,
    get: get,
  };
}

/**
 *
 * @param {SVGGelement[]} pEdges
 * @param {SVGGElement[]} pNodes
 * @return {{get: (pTitleText:string) => SVGGElement[]}}
 */
function Title2ElementMap(pEdges, pNodes) {
  /* {{[key: string]: SVGGElement[]}} */
  var elementMap = buildMap(pEdges, pNodes);

  /**
   * @param {NodeListOf<SVGGElement>} pEdges
   * @param {NodeListOf<SVGGElement>} pNodes
   * @return {{[key: string]: SVGGElement[]}}
   */
  function buildMap(pEdges, pNodes) {
    var title2NodeMap = buildTitle2NodeMap(pNodes);

    return nodeListToArray(pEdges).reduce(addEdgeToMap(title2NodeMap), {});
  }
  /**
   * @param {NodeListOf<SVGGElement>} pNodes
   * @return {{[key: string]: SVGGElement}}
   */
  function buildTitle2NodeMap(pNodes) {
    return nodeListToArray(pNodes).reduce(addNodeToMap, {});
  }

  function addNodeToMap(pMap, pNode) {
    var titleText = getTitleText(pNode);

    if (titleText) {
      pMap[titleText] = pNode;
    }
    return pMap;
  }

  function addEdgeToMap(pNodeMap) {
    return function (pEdgeMap, pEdge) {
      /** @type {string} */
      var titleText = getTitleText(pEdge);

      if (titleText) {
        var edge = pryEdgeFromTitle(titleText);

        pEdgeMap[titleText] = [pNodeMap[edge.from], pNodeMap[edge.to]];
        (pEdgeMap[edge.from] || (pEdgeMap[edge.from] = [])).push(pEdge);
        (pEdgeMap[edge.to] || (pEdgeMap[edge.to] = [])).push(pEdge);
      }
      return pEdgeMap;
    };
  }

  /**
   *
   * @param {string} pString
   * @return {{from?: string; to?:string;}}
   */
  function pryEdgeFromTitle(pString) {
    var nodeNames = pString.split(/\s*->\s*/);

    return {
      from: nodeNames.shift(),
      to: nodeNames.shift(),
    };
  }
  /**
   *
   * @param {string} pTitleText
   * @return {SVGGElement[]}
   */
  function get(pTitleText) {
    return (pTitleText && elementMap[pTitleText]) || [];
  }
  return {
    get: get,
  };
}

/**
 * @param {SVGGElement} pGElement
 * @return {string?}
 */
function getTitleText(pGElement) {
  /** @type {SVGTitleElement} */
  var title = pGElement && pGElement.querySelector("title");
  /** @type {string} */
  var titleText = title && title.textContent;

  if (titleText) {
    titleText = titleText.trim();
  }
  return titleText;
}

/**
 * @param {NodeListOf<Element>} pNodeList
 * @return {Element[]}
 */
function nodeListToArray(pNodeList) {
  var lReturnValue = [];

  pNodeList.forEach(function (pElement) {
    lReturnValue.push(pElement);
  });

  return lReturnValue;
}

function resetNodesAndEdges() {
  nodeListToArray(document.querySelectorAll(".current")).forEach(
    removeHighlight,
  );
}

/**
 * @param {SVGGElement} pGElement
 */
function removeHighlight(pGElement) {
  if (pGElement && pGElement.classList) {
    pGElement.classList.remove("current");
  }
}

/**
 * @param {SVGGElement} pGroup
 */
function addHighlight(pGroup) {
  if (pGroup && pGroup.classList) {
    pGroup.classList.add("current");
  }
}

var gHints = {
  HIDDEN: 1,
  SHOWN: 2,
  state: this.HIDDEN,
  show: function () {
    document.getElementById("hints").removeAttribute("style");
    gHints.state = gHints.SHOWN;
  },
  hide: function () {
    document.getElementById("hints").style = "display:none";
    gHints.state = gHints.HIDDEN;
  },
  toggle: function () {
    if ((gHints.state || gHints.HIDDEN) === gHints.HIDDEN) {
      gHints.show();
    } else {
      gHints.hide();
    }
  },
};

/** @param {KeyboardEvent} pKeyboardEvent */
function keyboardEventHandler(pKeyboardEvent) {
  if (pKeyboardEvent.key === "Escape") {
    resetNodesAndEdges();
    gMode.setToHover();
    gHints.hide();
  }
  if (pKeyboardEvent.key === "F1") {
    pKeyboardEvent.preventDefault();
    gHints.toggle();
  }
}

document.addEventListener("contextmenu", getSelectHandler(title2ElementMap));
document.addEventListener("mouseover", getHoverHandler(title2ElementMap));
document.addEventListener("keydown", keyboardEventHandler);
document.getElementById("close-hints").addEventListener("click", gHints.hide);
document.getElementById("button_help").addEventListener("click", gHints.toggle);
document.querySelector("svg").insertAdjacentHTML(
  "afterbegin",
  `<linearGradient id="edgeGradient">
      <stop offset="0%" stop-color="fuchsia"/>
      <stop offset="100%" stop-color="purple"/>
   </linearGradient>
  `,
);

// Add a small increment to the last value of the path to make gradients on
// horizontal paths work. Without them all browsers I tested with (firefox,
// chrome) do not render the gradient, but instead make the line transparent
// (or the color of the background, I haven't looked into it that deeply,
// but for the hack it doesn't matter which).
function skewLineABit(lDrawingInstructions) {
  var lLastValue = lDrawingInstructions.match(/(\d+\.?\d*)$/)[0];
  // Smaller values than .001 _should_ work as well, but don't in all
  // cases. Even this value is so small that it is not visible to the
  // human eye (tested with the two I have at my disposal).
  var lIncrement = 0.001;
  var lNewLastValue = parseFloat(lLastValue) + lIncrement;

  return lDrawingInstructions.replace(lLastValue, lNewLastValue);
}

nodeListToArray(document.querySelectorAll("path"))
  .filter(function (pElement) {
    return pElement.parentElement.classList.contains("edge");
  })
  .forEach(function (pElement) {
    pElement.attributes.d.value = skewLineABit(pElement.attributes.d.value);
  });

    </script>
  </body>
</html>
